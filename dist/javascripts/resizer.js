(function(){var t;t=function(){function t(){var t;this.assignElements(),this.parseTemplates(),this.setBindings(),t=this.parseQueryString(),t?(this.render("animating"),this.start(t)):this.render("home",{url:""}),this.verticalDragger=new Dragdealer("resize-control.vertical",{horizontal:!1,vertical:!0}),this.horizontalDragger=new Dragdealer("resize-control.horizontal",{horizontal:!0,vertical:!1})}return t.prototype.elementSelectors={templateLinks:"a[data-template]",render:".render",loadButton:".btn-load",startButton:".btn-start",endButton:".btn-end",pauseButton:".btn-pause",resumeButton:".btn-resume",minusButton:".btn-minus",plusButton:".btn-plus",helpButton:".button-help",showWidth:".show-width",resizer:".resizer",header:".header",url:".url-entry",img:".loading",body:"body"},t.prototype.elements={},t.prototype.data={templates:[],url:null,timer:null,paused:!1,resizing:!1,classResize:"resizing",classPause:"paused",enterKey:13,direction:-1,stepDuration:50,stepIncrememnt:10,animationDuration:100,animationIncrement:50,minWidth:320,currWidth:$(window).width(),maxWidth:$(window).width()},t.prototype.assignElements=function(){var t,e,n,i;n=this.elementSelectors,i=[];for(t in n)e=n[t],i.push(this.elements[t]&&this.elements[t].length?void 0:this.elements[t]=$(e));return i},t.prototype.parseTemplates=function(){var t,e,n,i,r;for(e=["animating-template","home-template","about-template","config-template"],r=[],n=0,i=e.length;i>n;n++)t=e[n],r.push(this.parseTemplate(t));return r},t.prototype.parseTemplate=function(t){var e;return e=$("#"+t),this.data.templates[t]=window.Hogan.compile(e.html())},t.prototype.render=function(t,e,n){var i;return t+="-template",i=this.data.templates[t].render(e),this.elements.render.html(i),n&&this.elements.body.removeClass().addClass(n),this.assignElements()},t.prototype.setBindings=function(){return $(window).resize(function(t){return function(){return t.updateMaxWidth}}(this)),this.elements.body.on("click",this.elementSelectors.templateLinks,function(t){return function(e){var n,i,r;return e.preventDefault(),n=$(e.target),i=n.data("class"),r=n.data("template"),t.render(r,{},i)}}(this)),this.elements.body.on("click",this.elementSelectors.loadButton,function(t){return function(){return t.load()}}(this)),this.elements.body.on("click",this.elementSelectors.startButton,function(t){return function(){return t.start()}}(this)),this.elements.body.on("click",this.elementSelectors.endButton,function(t){return function(){return t.end()}}(this)),this.elements.body.on("click",this.elementSelectors.pauseButton,function(t){return function(){return t.pause()}}(this)),this.elements.body.on("click",this.elementSelectors.resumeButton,function(t){return function(){return t.resume()}}(this)),this.elements.body.on("click",this.elementSelectors.plusButton,function(t){return function(){return t.plus()}}(this)),this.elements.body.on("click",this.elementSelectors.minusButton,function(t){return function(){return t.minus()}}(this)),this.elements.body.on("keydown",this.elementSelectors.url,function(t){return function(e){return e.stopPropagation(),e.which===t.data.enterKeypause?t.start(!1):void 0}}(this)),this.elements.body.on("blur",this.elementSelectors.showWidth,function(t){return function(){return t.setWidth()}}(this)),this.elements.body.on("keydown",this.elementSelectors.showWidth,function(t){return function(e){return e.stopPropagation(),e.which===t.data.enterKey?(e.preventDefault(),t.elements.showWidth.blur()):void 0}}(this)),this.setKeyBindings()},t.prototype.setKeyBindings=function(){return null==this.k&&(this.k=window.Keyboard),this.k.bind("s","keydown",function(t){return function(){return t.start.bind(t)}}(this)),this.k.bind("e","keydown",function(t){return function(){return t.end.bind(t)}}(this)),this.k.bind("p","keydown",function(t){return function(){return t.pause.bind(t)}}(this)),this.k.bind("r","keydown",function(t){return function(){return t.resume.bind(t)}}(this)),this.k.bind(["down","left","-"],"keydown",function(t){return function(){return t.minus.bind(t)}}(this)),this.k.bind(["up","right","+"],"keydown",function(t){return function(){return t.plus.bind(t)}}(this))},t.prototype.parseQueryString=function(){var t;return t=this.getQueryString(),t.hasOwnProperty("url")&&t.hasOwnProperty("width")?(""===t.url||isNaN(t.width)||(this.elements.url.val(t.url),this.data.currWidth=parseInt(t.width,10),this.elements.showWidth.text(t.width+"px").blur()),!0):!1},t.prototype.getQueryString=function(){var t,e,n,i;for(i={},e=window.location.hash.toString().substring(1),n=/([^&=]+)=([^&]*)/g,t=void 0,t=n.exec(e);t;)i[decodeURIComponent(t[1])]=decodeURIComponent(t[2]),t=n.exec(e);return this.data.url=i.url,i},t.prototype.load=function(){return this.elements.body.addClass(this.data.classResize),this.elements.img.removeClass("hidden"),this.data.url=this.data.url||this.elements.url.val(),-1===this.data.url.indexOf("://")&&(this.data.url="http://"+this.data.url),this.render("animating",{url:this.data.url}),$(this.elementSelectors.resizer).one("load",function(t){return function(){return t.elements.img.addClass("hidden"),$(".resizer").removeClass("hidden").css({height:640,width:320}),t.keepInBounds(!1),t.animator(t.data.animationDuration),t.pause()}}(this)),this.data.paused=!0,this.data.resizing=!1},t.prototype.start=function(t){return this.elements.body.addClass(this.data.classResize),this.elements.img.removeClass("hidden"),this.data.url=this.data.url||this.elements.url.val(),-1===this.data.url.indexOf("://")&&(this.data.url="http://"+this.data.url),this.render("animating",{url:this.data.url}),$(this.elementSelectors.resizer).one("load",function(e){return function(){return e.elements.img.addClass("hidden"),$(".resizer").removeClass("hidden").css({height:$(window).height()}),t===!0?(e.keepInBounds(!1),e.animator(e.data.animationDuration),e.pause()):e.data.timer=setInterval(function(){return e.resize("animationDuration","animationIncrement")},e.data.animationDuration)}}(this)),this.data.paused=!1,this.data.resizing=!0},t.prototype.end=function(){var t;return t=this.data.maxWidth,this.elements.body.removeClass(this.data.classResize),clearInterval(this.data.timer),this.elements.body.stop(!0,!0),this.elements.img.addClass("hidden"),$(this.elementSelectors.resizer).remove(),this.elements.body.removeClass(this.data.classPause),this.data.direction=-1,this.render("home",{url:this.data.url}),this.data.url=null,this.data.currWidth=t,this.elements.body.width(t),this.elements.header.width(t),this.elements.showWidth.text(t+"px"),window.location.hash="",this.data.paused=!1,this.data.resizing=!1},t.prototype.animator=function(t){return this.elements.body.animate({width:this.data.currWidth},t,function(t){return function(){return t.elements.showWidth.text(t.data.currWidth+"px")}}(this)),window.location.hash="#url="+encodeURIComponent(this.elements.url.val())+"&width="+encodeURIComponent(this.data.currWidth)},t.prototype.keepInBounds=function(t){if(this.data.currWidth>this.data.maxWidth){if(this.data.currWidth=this.data.maxWidth,t)return this.data.direction*=-1}else if(this.data.currWidth<this.data.minWidth&&(this.data.currWidth=this.data.minWidth,t))return this.data.direction*=-1},t.prototype.minus=function(){return this.updateDirection(-1),this.resize("stepDuration","stepIncrememnt")},t.prototype.pause=function(){return this.elements.body.addClass(this.data.classPause).stop(!0,!0),clearInterval(this.data.timer),this.updateWidth(this.elements.body.width()),this.data.paused=!0},t.prototype.plus=function(){return this.updateDirection(1),this.resize("stepDuration","stepIncrememnt")},t.prototype.resize=function(t,e){var n,i,r,s;return n=this.data[e],i=this.data[t],r="stepDuration"===t?!1:!0,s=this.data.currWidth,this.data.currWidth=this.data.currWidth+n*this.data.direction,this.keepInBounds(r),s!==this.data.currWidth?this.animator(i):void 0},t.prototype.resume=function(){return this.elements.body.removeClass(this.data.classPause).stop(!0,!0),this.data.timer=setInterval(function(t){return function(){return t.resize("animationDuration","animationIncrement")}}(this),this.data.animationDuration),this.data.paused=!1},t.prototype.setWidth=function(){var t,e;return t=this.elements.showWidth.text().replace(" ","").replace("px","").replace("em",""),e=this.data.currWidth,isNaN(t)?void this.elements.showWidth.text(this.data.currWidth+"px"):(this.data.currWidth=parseInt(t,10),this.updateDirection(this.data.currWidth<e?-1:1),this.keepInBounds(!1),e!==this.data.currWidth?this.animator(this.data.animationDuration):void 0)},t.prototype.updateDirection=function(t){return this.data.direction=t},t.prototype.updateMaxWidth=function(){return this.data.max=$(window).width()},t.prototype.updateWidth=function(t){return this.data.currWidth=t,this.elements.showWidth.text(this.data.currWidth+"px")},t}(),$(function(){return window.resizive=new t})}).call(this);